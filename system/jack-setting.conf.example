# =============================================================================
# Audio Interface JACK Starter - Configuration File (v3.0)
# =============================================================================
# This file controls JACK audio server settings for your audio interface.
# Works with any JACK-compatible USB audio interface.
#
# Location options:
#   System-wide: /etc/ai-jack/jack-setting.conf
#   User-specific: ~/.config/ai-jack/jack-setting.conf
#
# Priority: User config overrides system config
#
# Copyright (C) 2025
# License: GPL-3.0-or-later
# =============================================================================

# =============================================================================
# DEVICE SETTINGS
# =============================================================================

# -----------------------------------------------------------------------------
# ALSA Audio Device ID
# -----------------------------------------------------------------------------
# The ALSA device identifier used by JACK. Format: hw:CARD,DEVICE
#
# To find your device:
#   aplay -l    (lists all sound cards)
#   aplay -L    (lists all PCM devices)
#
# Common formats:
#   hw:0,0        - First sound card, first device (generic)
#   hw:M4,0       - MOTU M4
#   hw:USB,0      - Generic USB audio (often Focusrite)
#   hw:Babyface,0 - RME Babyface
#   hw:Scarlett,0 - Focusrite Scarlett (if named)
#
# Example configurations for popular interfaces:
#
#   MOTU M4:
#     AUDIO_DEVICE=hw:M4,0
#
#   Focusrite Scarlett 2i2:
#     AUDIO_DEVICE=hw:USB,0
#
#   RME Babyface Pro:
#     AUDIO_DEVICE=hw:Babyface,0
#
#   Native Instruments Komplete Audio:
#     AUDIO_DEVICE=hw:Audio,0
#
AUDIO_DEVICE=hw:0,0

# -----------------------------------------------------------------------------
# Device Detection Pattern
# -----------------------------------------------------------------------------
# Pattern to search for in `aplay -l` output to verify hardware presence.
# Used for automatic JACK start/stop when devices are connected/disconnected.
#
# Leave empty to disable hardware checking (JACK starts on any audio event).
# Set to a unique string from your device's aplay -l output.
#
# How to find your pattern:
#   Run: aplay -l
#   Look for a unique identifier, e.g.:
#     "card 2: M4 [M4], device 0: USB Audio [USB Audio]"
#     -> Pattern: "M4"
#
# Examples:
#   MOTU M4:           DEVICE_PATTERN=M4
#   Focusrite Scarlett: DEVICE_PATTERN=Scarlett
#   RME Babyface:      DEVICE_PATTERN=Babyface
#   Any USB device:    DEVICE_PATTERN=     (empty - no check)
#
DEVICE_PATTERN=

# =============================================================================
# JACK AUDIO SETTINGS
# =============================================================================

# -----------------------------------------------------------------------------
# Sample Rate (Hz)
# -----------------------------------------------------------------------------
# Common values: 22050, 44100, 48000, 88200, 96000, 176400, 192000
# Recommended: 48000 (standard for most audio work)
#
JACK_RATE=48000

# -----------------------------------------------------------------------------
# Period Size (Buffer Size in frames)
# -----------------------------------------------------------------------------
# Lower values = lower latency but higher CPU load
# Higher values = higher latency but more stable
#
# Common values: 64, 128, 256, 512, 1024, 2048
# Recommended starting points:
#   - 256 for stable systems (most users)
#   - 128 for low latency (optimized systems)
#   - 64 for ultra-low latency (requires RT kernel + optimizations)
#
JACK_PERIOD=256

# -----------------------------------------------------------------------------
# Number of Periods
# -----------------------------------------------------------------------------
# More periods = more buffering = higher total latency
# USB audio typically works best with 2-3 periods
#
# Common values: 2, 3, 4
# Recommended: 2 for low latency, 3 for USB audio stability
#
JACK_NPERIODS=2

# =============================================================================
# MIDI SETTINGS
# =============================================================================

# -----------------------------------------------------------------------------
# ALSA-to-JACK MIDI Bridge (a2jmidid)
# -----------------------------------------------------------------------------
# Controls whether a2jmidid should be started automatically.
#
# When enabled (true):
#   - ALSA MIDI devices appear in JACK
#   - Uses --export-hw flag to keep hardware ports available for ALSA apps
#   - Useful for hardware MIDI controllers and older software
#
# When disabled (false):
#   - No automatic MIDI bridge
#   - Modern DAWs (Bitwig, Reaper) can access ALSA MIDI directly
#   - Avoids "device busy" conflicts
#
# Values: true, false, yes, no, 1, 0
# Recommended: false (for modern DAWs like Bitwig/Reaper)
#              true (if you need MIDI routing in JACK or use hardware controllers)
#
A2J_ENABLE=false

# =============================================================================
# ADVANCED SETTINGS
# =============================================================================

# -----------------------------------------------------------------------------
# DBus Session Bus Timeout (seconds)
# -----------------------------------------------------------------------------
# Maximum time to wait for DBus session bus to become available at startup.
# This is important for reliable JACK autostart, especially at boot time
# when the user session is still initializing.
#
# The DBus session bus is required for:
#   - jack_control communication with JACK server
#   - a2jmidid control commands
#   - System notifications
#
# If DBus is not available after this timeout, JACK startup continues anyway
# but some features may not work correctly.
#
# Default: 30 seconds (sufficient for most systems)
# Increase if you experience DBus-related errors in logs
#
DBUS_TIMEOUT=30

# =============================================================================
# LATENCY REFERENCE
# =============================================================================
# Buffer Latency = JACK_PERIOD / JACK_RATE * 1000 ms
# Round-Trip Latency = (JACK_PERIOD * JACK_NPERIODS) / JACK_RATE * 1000 ms
#
# Examples at 48000 Hz:
#   256 frames, 2 periods = 5.3ms buffer, 10.7ms round-trip
#   128 frames, 2 periods = 2.7ms buffer, 5.3ms round-trip
#   64 frames, 2 periods = 1.3ms buffer, 2.7ms round-trip
# =============================================================================

# =============================================================================
# QUICK START EXAMPLES
# =============================================================================
#
# MOTU M4 (recommended settings):
#   AUDIO_DEVICE=hw:M4,0
#   DEVICE_PATTERN=M4
#   JACK_RATE=48000
#   JACK_PERIOD=256
#   JACK_NPERIODS=2
#
# Focusrite Scarlett 2i2 (Gen 3):
#   AUDIO_DEVICE=hw:USB,0
#   DEVICE_PATTERN=Scarlett
#   JACK_RATE=48000
#   JACK_PERIOD=256
#   JACK_NPERIODS=3
#
# RME Babyface Pro:
#   AUDIO_DEVICE=hw:Babyface,0
#   DEVICE_PATTERN=Babyface
#   JACK_RATE=48000
#   JACK_PERIOD=128
#   JACK_NPERIODS=2
#
# Generic USB Audio (no auto-detection):
#   AUDIO_DEVICE=hw:0,0
#   DEVICE_PATTERN=
#   JACK_RATE=48000
#   JACK_PERIOD=512
#   JACK_NPERIODS=3
#
# =============================================================================
